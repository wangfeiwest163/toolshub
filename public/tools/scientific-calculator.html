
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific Calculator - ToolsHub</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/fontawesome-all.min.css">
    <style>
        .calculator-container {
            max-width: 500px;
            margin: 0 auto;
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .display {
            width: 100%;
            height: 80px;
            font-size: 2rem;
            text-align: right;
            padding: 15px;
            margin-bottom: 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            background-color: white;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .button-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .calc-btn {
            flex: 1;
            padding: 15px;
            font-size: 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 60px;
        }
        
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .calc-btn:active {
            transform: translateY(0);
        }
        
        .number-btn {
            background-color: #ffffff;
            border: 1px solid #ced4da;
        }
        
        .operator-btn {
            background-color: #007bff;
            color: white;
        }
        
        .function-btn {
            background-color: #6c757d;
            color: white;
        }
        
        .equals-btn {
            background-color: #28a745;
            color: white;
        }
        
        .clear-btn {
            background-color: #dc3545;
            color: white;
        }
        
        .history-container {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #dee2e6;
        }
        
        .history-item {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .calculation-expression {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .calculation-result {
            color: #28a745;
            font-weight: bold;
        }
        
        .memory-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #ffc107;
            color: #212529;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
        }
    </style>
</head>
<body data-tool-id="9" data-tool-name="scientific-calculator">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-tools"></i> ToolsHub
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/tools/all">All Tools</a>
                    </li>
                </ul>
                <form class="d-flex" role="search" onsubmit="event.preventDefault(); performSearch(event);">
                    <input class="form-control me-2" type="search" id="searchInput" placeholder="Search tools..." aria-label="Search">
                    <button class="btn btn-outline-light" type="submit">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                        <li class="breadcrumb-item"><a href="/tools/all" onclick="event.preventDefault(); loadCategory('Online Calculators')">Online Calculators</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Scientific Calculator</li>
                    </ol>
                </nav>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h3>Scientific Calculator</h3>
                        <button class="btn btn-outline-primary" id="favoriteBtn">
                            <i class="far fa-star"></i> Favorite
                        </button>
                    </div>
                    <div class="card-body">
                        <p class="card-text">A powerful scientific calculator with advanced mathematical functions.</p>
                        
                        <div class="calculator-container">
                            <div class="position-relative">
                                <input type="text" class="display" id="display" readonly value="0">
                                <div id="memoryIndicator" class="memory-indicator" style="display: none;">M</div>
                            </div>
                            
                            <!-- Calculator buttons -->
                            <div class="button-row">
                                <button class="calc-btn clear-btn" data-action="clear">C</button>
                                <button class="calc-btn clear-btn" data-action="clearEntry">CE</button>
                                <button class="calc-btn function-btn" data-action="backspace">⌫</button>
                                <button class="calc-btn operator-btn" data-action="operation" data-value="/">÷</button>
                            </div>
                            
                            <div class="button-row">
                                <button class="calc-btn function-btn" data-action="function" data-value="sin">sin</button>
                                <button class="calc-btn function-btn" data-action="function" data-value="cos">cos</button>
                                <button class="calc-btn function-btn" data-action="function" data-value="tan">tan</button>
                                <button class="calc-btn operator-btn" data-action="operation" data-value="*">×</button>
                            </div>
                            
                            <div class="button-row">
                                <button class="calc-btn function-btn" data-action="function" data-value="log">log</button>
                                <button class="calc-btn function-btn" data-action="function" data-value="ln">ln</button>
                                <button class="calc-btn function-btn" data-action="function" data-value="sqrt">√</button>
                                <button class="calc-btn operator-btn" data-action="operation" data-value="-">−</button>
                            </div>
                            
                            <div class="button-row">
                                <button class="calc-btn function-btn" data-action="function" data-value="pow">x^y</button>
                                <button class="calc-btn function-btn" data-action="function" data-value="exp">e^x</button>
                                <button class="calc-btn function-btn" data-action="function" data-value="factorial">x!</button>
                                <button class="calc-btn operator-btn" data-action="operation" data-value="+">+</button>
                            </div>
                            
                            <div class="button-row">
                                <button class="calc-btn number-btn" data-action="number" data-value="7">7</button>
                                <button class="calc-btn number-btn" data-action="number" data-value="8">8</button>
                                <button class="calc-btn number-btn" data-action="number" data-value="9">9</button>
                                <button class="calc-btn function-btn" data-action="function" data-value="(">(</button>
                            </div>
                            
                            <div class="button-row">
                                <button class="calc-btn number-btn" data-action="number" data-value="4">4</button>
                                <button class="calc-btn number-btn" data-action="number" data-value="5">5</button>
                                <button class="calc-btn number-btn" data-action="number" data-value="6">6</button>
                                <button class="calc-btn function-btn" data-action="function" data-value=")">)</button>
                            </div>
                            
                            <div class="button-row">
                                <button class="calc-btn number-btn" data-action="number" data-value="1">1</button>
                                <button class="calc-btn number-btn" data-action="number" data-value="2">2</button>
                                <button class="calc-btn number-btn" data-action="number" data-value="3">3</button>
                                <button class="calc-btn function-btn" data-action="function" data-value="pi">π</button>
                            </div>
                            
                            <div class="button-row">
                                <button class="calc-btn number-btn" data-action="number" data-value="0">0</button>
                                <button class="calc-btn number-btn" data-action="decimal">.</button>
                                <button class="calc-btn function-btn" data-action="function" data-value="sign">±</button>
                                <button class="calc-btn equals-btn" data-action="calculate">=</button>
                            </div>
                            
                            <div class="button-row mt-3">
                                <button class="calc-btn function-btn" data-action="memory" data-value="mc">MC</button>
                                <button class="calc-btn function-btn" data-action="memory" data-value="mr">MR</button>
                                <button class="calc-btn function-btn" data-action="memory" data-value="mplus">M+</button>
                                <button class="calc-btn function-btn" data-action="memory" data-value="mminus">M-</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <h4>Calculation History</h4>
                    </div>
                    <div class="history-container">
                        <div id="historyList"></div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5>Related Tools</h5>
                    </div>
                    <div class="list-group list-group-flush">
                        <a href="/tools/financial-calculator" class="list-group-item list-group-item-action">
                            <i class="fas fa-calculator me-2"></i> Financial Calculator
                        </a>
                        <a href="/tools/bmi-calculator" class="list-group-item list-group-item-action">
                            <i class="fas fa-weight me-2"></i> BMI Calculator
                        </a>
                        <a href="/tools/tip-calculator" class="list-group-item list-group-item-action">
                            <i class="fas fa-hand-holding-usd me-2"></i> Tip Calculator
                        </a>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <h5>Functions</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li><i class="fas fa-check-circle text-success me-2"></i> Basic Operations (+, -, ×, ÷)</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i> Trigonometric Functions (sin, cos, tan)</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i> Logarithmic Functions (log, ln)</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i> Exponents and Roots (x^y, √)</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i> Constants (π)</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i> Parentheses Support</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i> Memory Functions</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <h5>Shortcuts</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li><kbd>Enter</kbd> - Calculate result</li>
                            <li><kbd>Escape</kbd> - Clear calculator</li>
                            <li><kbd>Delete</kbd> - Delete last character</li>
                            <li><kbd>Ctrl+M</kbd> - Store to memory</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white text-center py-3 mt-5">
        <p>&copy; 2024 ToolsHub - All rights reserved</p>
    </footer>

    <script src="/js/bootstrap.bundle.min.js"></script>
    <script>
        class ScientificCalculator {
            constructor() {
                this.display = document.getElementById('display');
                this.historyList = document.getElementById('historyList');
                this.memoryIndicator = document.getElementById('memoryIndicator');
                
                this.currentInput = '0';
                this.operator = null;
                this.previousInput = null;
                this.waitingForOperand = false;
                this.memory = 0;
                this.history = [];
                
                this.initializeButtons();
                this.setupKeyboardShortcuts();
                this.updateDisplay();
            }
            
            initializeButtons() {
                const buttons = document.querySelectorAll('.calc-btn');
                buttons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        const action = e.currentTarget.getAttribute('data-action');
                        const value = e.currentTarget.getAttribute('data-value');
                        
                        switch(action) {
                            case 'number':
                                this.inputNumber(value);
                                break;
                            case 'decimal':
                                this.inputDecimal();
                                break;
                            case 'operation':
                                this.inputOperator(value);
                                break;
                            case 'function':
                                this.inputFunction(value);
                                break;
                            case 'calculate':
                                this.calculate();
                                break;
                            case 'clear':
                                this.clear();
                                break;
                            case 'clearEntry':
                                this.clearEntry();
                                break;
                            case 'backspace':
                                this.backspace();
                                break;
                            case 'memory':
                                this.memoryOperation(value);
                                break;
                        }
                    });
                });
            }
            
            setupKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    if (e.key >= '0' && e.key <= '9') {
                        this.inputNumber(e.key);
                    } else if (e.key === '.') {
                        this.inputDecimal();
                    } else if (e.key === '+' || e.key === '-' || e.key === '*' || e.key === '/') {
                        this.inputOperator(e.key);
                    } else if (e.key === 'Enter' || e.key === '=') {
                        e.preventDefault();
                        this.calculate();
                    } else if (e.key === 'Escape') {
                        e.preventDefault();
                        this.clear();
                    } else if (e.key === 'Backspace') {
                        e.preventDefault();
                        this.backspace();
                    } else if (e.key === '(') {
                        this.inputFunction('(');
                    } else if (e.key === ')') {
                        this.inputFunction(')');
                    }
                });
            }
            
            inputNumber(num) {
                if (this.waitingForOperand) {
                    this.currentInput = num;
                    this.waitingForOperand = false;
                } else {
                    this.currentInput = this.currentInput === '0' ? num : this.currentInput + num;
                }
                this.updateDisplay();
            }
            
            inputDecimal() {
                if (this.waitingForOperand) {
                    this.currentInput = '0.';
                    this.waitingForOperand = false;
                } else if (this.currentInput.indexOf('.') === -1) {
                    this.currentInput += '.';
                }
                this.updateDisplay();
            }
            
            inputOperator(nextOperator) {
                const inputValue = parseFloat(this.currentInput);
                
                if (this.previousInput === null) {
                    this.previousInput = inputValue;
                } else if (this.operator) {
                    const currentValue = this.previousInput || 0;
                    const newValue = this.performCalculation(currentValue, inputValue, this.operator);
                    
                    this.currentInput = String(newValue);
                    this.previousInput = newValue;
                }
                
                this.waitingForOperand = true;
                this.operator = nextOperator;
            }
            
            inputFunction(func) {
                const inputValue = parseFloat(this.currentInput);
                let result;
                
                switch(func) {
                    case 'sin':
                        result = Math.sin(inputValue * Math.PI / 180); // Convert to radians
                        break;
                    case 'cos':
                        result = Math.cos(inputValue * Math.PI / 180); // Convert to radians
                        break;
                    case 'tan':
                        result = Math.tan(inputValue * Math.PI / 180); // Convert to radians
                        break;
                    case 'log':
                        result = Math.log10(inputValue);
                        break;
                    case 'ln':
                        result = Math.log(inputValue);
                        break;
                    case 'sqrt':
                        result = Math.sqrt(inputValue);
                        break;
                    case 'pow':
                        this.operator = '^';
                        this.previousInput = inputValue;
                        this.waitingForOperand = true;
                        this.updateDisplay();
                        return;
                    case 'exp':
                        result = Math.exp(inputValue);
                        break;
                    case 'factorial':
                        result = this.factorial(Math.floor(inputValue));
                        break;
                    case 'pi':
                        this.currentInput = Math.PI.toString();
                        this.updateDisplay();
                        return;
                    case '(':
                    case ')':
                        // For now, just append to the expression
                        if (this.waitingForOperand) {
                            this.currentInput = func;
                            this.waitingForOperand = false;
                        } else {
                            this.currentInput += func;
                        }
                        this.updateDisplay();
                        return;
                    case 'sign':
                        this.currentInput = String(-parseFloat(this.currentInput));
                        this.updateDisplay();
                        return;
                }
                
                if (result !== undefined) {
                    this.currentInput = String(result);
                    this.waitingForOperand = true;
                    this.addToHistory(`${func}(${inputValue})`, result);
                }
                
                this.updateDisplay();
            }
            
            calculate() {
                const inputValue = parseFloat(this.currentInput);
                
                if (this.previousInput === null || this.operator === null) {
                    return;
                }
                
                const result = this.performCalculation(this.previousInput, inputValue, this.operator);
                
                this.addToHistory(`${this.previousInput} ${this.operator} ${inputValue}`, result);
                
                this.currentInput = String(result);
                this.previousInput = null;
                this.operator = null;
                this.waitingForOperand = true;
                
                this.updateDisplay();
            }
            
            performCalculation(firstValue, secondValue, operator) {
                switch(operator) {
                    case '+':
                        return firstValue + secondValue;
                    case '-':
                        return firstValue - secondValue;
                    case '*':
                        return firstValue * secondValue;
                    case '/':
                        return secondValue !== 0 ? firstValue / secondValue : 0;
                    case '^':
                        return Math.pow(firstValue, secondValue);
                    default:
                        return secondValue;
                }
            }
            
            factorial(n) {
                if (n < 0) return NaN;
                if (n === 0 || n === 1) return 1;
                
                let result = 1;
                for (let i = 2; i <= n; i++) {
                    result *= i;
                }
                return result;
            }
            
            clear() {
                this.currentInput = '0';
                this.previousInput = null;
                this.operator = null;
                this.waitingForOperand = false;
                this.updateDisplay();
            }
            
            clearEntry() {
                this.currentInput = '0';
                this.updateDisplay();
            }
            
            backspace() {
                if (this.currentInput.length > 1) {
                    this.currentInput = this.currentInput.slice(0, -1);
                } else {
                    this.currentInput = '0';
                }
                this.updateDisplay();
            }
            
            memoryOperation(op) {
                const currentValue = parseFloat(this.currentInput);
                
                switch(op) {
                    case 'mc': // Memory Clear
                        this.memory = 0;
                        this.updateMemoryIndicator();
                        break;
                    case 'mr': // Memory Recall
                        this.currentInput = String(this.memory);
                        this.updateDisplay();
                        break;
                    case 'mplus': // Memory Plus
                        this.memory += currentValue;
                        this.updateMemoryIndicator();
                        break;
                    case 'mminus': // Memory Minus
                        this.memory -= currentValue;
                        this.updateMemoryIndicator();
                        break;
                }
            }
            
            updateMemoryIndicator() {
                if (this.memory !== 0) {
                    this.memoryIndicator.style.display = 'block';
                } else {
                    this.memoryIndicator.style.display = 'none';
                }
            }
            
            addToHistory(expression, result) {
                this.history.unshift({ expression, result });
                
                // Limit history to 10 items
                if (this.history.length > 10) {
                    this.history.pop();
                }
                
                this.updateHistory();
            }
            
            updateHistory() {
                this.historyList.innerHTML = '';
                
                this.history.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.innerHTML = `
                        <div class="calculation-expression">${item.expression}</div>
                        <div class="calculation-result">= ${item.result}</div>
                    `;
                    this.historyList.appendChild(historyItem);
                });
            }
            
            updateDisplay() {
                this.display.value = this.currentInput;
            }
        }
        
        // Initialize the calculator when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            const calculator = new ScientificCalculator();
            
            // Initialize favorite button functionality
            document.getElementById('favoriteBtn').addEventListener('click', function() {
                const icon = this.querySelector('i');
                if (icon.classList.contains('far')) {
                    icon.classList.remove('far');
                    icon.classList.add('fas', 'text-warning');
                    this.innerHTML = '<i class="fas fa-star text-warning"></i> Favorited';
                } else {
                    icon.classList.remove('fas', 'text-warning');
                    icon.classList.add('far');
                    this.innerHTML = '<i class="far fa-star"></i> Favorite';
                }
            });
            
            // Search functionality
            window.performSearch = function(event) {
                if (event) event.preventDefault();
                const searchTerm = document.getElementById('searchInput').value;
                if (searchTerm) {
                    window.location.href = `/tools/all?search=${encodeURIComponent(searchTerm)}`;
                }
            };
            
            window.loadCategory = function(category) {
                window.location.href = `/tools/all?category=${encodeURIComponent(category)}`;
            };
        });
    </script>
</body>
</html>
